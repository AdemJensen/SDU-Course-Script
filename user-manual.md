# SDU抢课脚本 用户使用说明
## 前言
此脚本能够消除SDU的童鞋抢不到课的难受感觉。

全平台，全自动，让你轻松上到你想要的课（雾）

To非SDU的童鞋：本脚本是基于QH大学开发的在线选课系统运行的。如果你的学校恰好也是QH大学开发的，那么这套系统改一改可能就可以用上了！

具体怎么改请往后看！

## 使用方法

您有两种方法可以使用该脚本，一种是到`Release`页面下载jar包运行，另外一种是下载源代码并执行Main.kt文件。

注意，无论哪种方法，都要求您的电脑中**正确安装并配置**了`JDK11`。如果您不知道如何安装`JDK11`，以下是几个常见平台的JDK11安装教程
                                                           
- Windows10 [JDK11 JAVA11下载安装与快速配置环境变量教程](https://blog.csdn.net/weixin_40928253/article/details/83590136)
- Mac OSX   [mac系统下安装Java开发环境（一）——JDK安装](https://jingyan.baidu.com/article/7f766daffd99354101e1d095.html) (本篇介绍的是安装JDK1.8，但原理和JDK11的安装差不多)
- Linux     [linux18.04下安装的jdk11.0.2](https://www.cnblogs.com/hhxz/p/10547729.html)

JDK11的下载链接：[Java SE Development Kit 11 Downloads](https://www.oracle.com/technetwork/java/javase/downloads/jdk11-downloads-5066655.html)

如果你还不懂，百度欢迎您！

### 下载jar包运行
下载并解压zip文件，您将会得到`SDUClass.jar`文件和config.ini文件。

您可以将这两个文件移动到任何**有执行权限和读写权限**的文件目录中，并且保证两个文件在同一目录下。

使用文字编辑工具（Windows记事本，Mac文本编辑器等）打开config.ini文件，您将会看到：
```
# powered by Grapes
username 账号
password 密码
# 格式：course 课程号 课序号
course SQ0000037H 400
course SQ0000045N 400
```

其中，每行前面带有"#"的是注释行，对程序的运行没有影响。

将`账号`两个字替换为您在选课系统中的用户名，将`密码`替换为密码。

然后您可以看到下面有两行course设置，这些设置只是样例，将它们删除即可。

例如，您要选择的课课程号是SQ0000037H，课序号是400，那么就在ini文件中添加一行`course SQ0000037H 400`。

请确保您的配置是正确的，以免造成意想不到的错误。

如果您是Windows用户：打开CMD，将当前目录修改为jar包和ini文件所在的目录。   
如果您是MacOSX/Linux用户：打开终端（Terminal），通过cd命令将当前目录修改为jar包和ini文件所在的目录。

之后输入`java -jar SDUClass.jar`，即可看到程序正在运行了。

### 直接下载源码
本代码采用`Intellij Idea`编辑器进行编写，上传至GitHub过程中保留了对应的工程描述文件。如果您恰好使用的是`Intellij Idea`编辑器，那么您可以直接通过打开按钮开启工程界面，单击右上角绿色箭头即可运行。

如果您碰巧没有使用该IDE，那么我们推荐您下载一个（雾）。

本代码是Kotlin编写的。

具体运行的话，就是MainKt啦，在此不再赘述。不过在运行以前，还是要配置ini文件，这一点请参照上面**下载jar包运行**章节。

## 程序输出解释
在运行程序的时候，有这么几个运行状态，不同状态会提示不同的输出。

### 设置加载阶段
- 出现红色exception提示：大概是您的ini文件没有到位，主程序和ini文件不在一个文件夹下，导致程序读不到ini。
- 出现`语法错误在：XX: 课程应该同时包含课程号和课序号`：ini文件中有course设置格式不正确。出现这种问题不会导致程序停止运行，只会导致对应行设置无效。
- 出现`用户名密码设置不正确，系统自动退出`：ini文件中用户名和密码未被正确设置。
- 出现`有效的备选课程列表为空，无法继续，请检查配置文件是否正确`：无有效的course设置，程序无法执行。
- 出现`设置加载过程出现严重错误，系统自动退出`：通常是因为有未知的exception，这种情况如果您无法排除错误的话，您可以在GitHub主界面提出Issue。
- 出现`设置加载已完成`：代表程序设置加载OK。

### 用户登录阶段
- 如果显示"失败"，你懂得。

### 预检查阶段
本阶段将会对列表内所有的课程进行检查，确认是否已经存在您的课程列表中，防止浪费系统资源和重复选择。

如果显示某个课程：

- `已在您的课程列表中`，代表这个课程可能已经被选上了，后面执行就不会再管它了。
- `未能找到该课程，请注意检查配置文件`，代表这个课程在整个教务系统中都没有找到，有可能是您的设置文件出了问题。当然，如果这个课开放时间比较特殊的话，您也可以先填上。虽然系统会无法识别，但是在您确认后，这个课仍然会被监听，直到它出现在列表中。
- `目标确认`，代表这个课程是一个有效的目标，接下来将会监听这个课程的课余量动向。

执行过检查后，如果出现：

- `所有课程已存在于您的列表中，没有可执行的操作`：代表所有课程都在列表中，无法操作

如果出现需要您输入字符进行确认的，请输入，并按下回车即可。

### 监听阶段
显示某课程：

- `已成功选择`，代表这个课程已经成功添加到您的课程列表中，恭喜！
- `未找到，建议您检查配置文件`，如上述所说，有两种原因。
- `当前课余量不足，正在监听课余量变化`，正常的比较火爆的课程都是这样，此时处于监听模式。如果监听到课余量大于0则直接自动选上。
- `检测到课余量但未能成功选择，建议您打开教务系统 XXX ，确认该课程是否与其他课程冲突`，检测到课余量变化了，但是可惜没抢上，不知道为啥。
- `出现未知错误`，通常是因为有未知的exception，这种情况如果您无法排除错误的话，您可以在GitHub主界面提出Issue。

由于本阶段执行时间较长，而学校教务系统的登录时效有限，因此当登录超出时限后，系统将会自动重新登录。登录成功后，系统将会继续进行监听。

### 最终检查阶段
最终检查的话跟最前面的检查是差不多的，异常的是`未成功在列表中检测到，操作可能无效`，这种情况下需要您打开教务系统去确认操作是否成功。

## 修改指南
To非SDU的童鞋：本脚本是基于QH大学开发的在线选课系统运行的。如果你的学校恰好也是QH大学开发的，那么这套系统改一改可能就可以用上了！

请修改GPost.kt中的$ROOT变量，建议您打开Chrome浏览器分析一下Request和Respond内容

## 版权声明
并没有版权声明。如果有，那就GPL吧，哈哈！

两个大一的小盆友写出来的（确切的说是一个小朋友写，然后另一个小朋友疯狂改。具体的可以看原作者的代码仓库，那个疯狂改的小朋友已经提交了n次Pull Request）

如果您觉得这玩意很好玩，您可以弄下来一起贡献一点代码呀，互相学习一下。

欢迎给我们提供Pull Request呀！

## 免责声明
本脚本仅供网络编程学习参考，一切用于违法行为或一切因使用此脚本导致的直接或间接损失，全体代码贡献者不承担任何责任。

下载、Fork、Clone或者本代码即表明您已阅读并同意该免责声明。